function loginCallback(){FB.getLoginStatus(function(e){$(".header").show(),"connected"===e.status?($("#alertText").text("Connected"),$("#alertBody").hide(),$(".alert").delay(1500).fadeOut(2e3),$(".splash").fadeOut(2e3),displayPage(),getAlbums()):($(".alert").fadeIn(2e3),$(".splash").fadeIn(2e3),$("#alertText").text("Please Login"),$("#alertBody").show())})}function displayPage(){FB.api("/"+pageId,"get",function(e){e&&!e.error&&($(".bg").css("background-image",'url("'+e.cover.source+'")'),$("#title").text(e.name),$("#description").text(e.description))})}function getAlbums(){FB.api("/"+pageId+"/albums",function(e){if(e&&!e.error)for(var i=e.data.length,t=0,a=0;a<e.data.length;a++)FB.api("/"+e.data[a].id+"/photos",function(e){for(var a=e.data,o=a.length,n=0;n<a.length;n++)for(var l=0;l<a[n].images.length;l++)if(320===a[n].images[l].height){var s=a[n].name;void 0===s&&(s="");var r=a[n].likes;r=void 0===r?0:a[n].likes.data.length,img.push({id:a[n].id,source:a[n].images[l].source,url:a[n].source,title:s,likes:r})}t++,t===i&&(console.log(img),displayPhotos(img),likeBtn(img))})})}function displayPhotos(e){for(var i="",t=0;t<e.length;t++)i+='<figure class="cell"><a href="'+e[t].url+'" data-lightbox="gallary" data-title="'+e[t].title+'"><img src="'+e[t].source+'" alt="'+e[t].title+'"></a><figcaption>'+e[t].title+'<br><img id="'+t+'" src="img/fbl.png" title="Like"><span>'+e[t].likes+"</span></figcaption></figure>";$(".gallery").html(i)}function likeBtn(e){for(var i=0;i<e.length;i++){var t=e[i].id;$("#"+i).click(askPermissionToLike(t,i))}}function askPermissionToLike(e,i){return function(t){FB.api("/me/permissions",function(t){for(var a=!1,o=0;o<t.data.length;o++)"publish_actions"===t.data[o].permission&&"granted"===t.data[o].status&&(a=!0);a?like(e,i):FB.login(function(i){i.authResponse?like(e):console.log("User canceled login or did not fully authorize the app.")},{scope:"publish_actions"})})}}function like(e,i){FB.api("/me?fields=id",function(t){myId=t.id,FB.api(e+"/likes?fields=id",function(t){for(var a=!1,o=0;o<t.data.length;o++)t.data[o].id===myId&&(a=!0);a?alert("I know you like this photo, but unfortunatly Facebook only allows you to like it once."):FB.api("/"+e+"/likes","POST",function(e){if(e.success===!0){console.log("Like was successful");var t=img[i].likes;t++,$("#"+i).next().text(t)}else console.log(e.error.message)})})})}var pageId="815157038515764",appId="1480115835608916",img=[];$(document).ready(function(){$.ajaxSetup({cache:!0}),$.getScript("//connect.facebook.net/en_UK/all.js",function(){FB.init({appId:appId,xfbml:!0,version:"v2.1"}),loginCallback()})});
//# sourceMappingURL=./model-min.js.map